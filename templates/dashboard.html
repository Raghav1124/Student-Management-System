{% extends "base.html" %} {% block title %}Dashboard{% endblock %} {% block
content %}
<div class="container py-4 animate-in">
  <!-- Welcome Header -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card border-0 shadow-sm">
        <div class="card-body text-center py-5">
          <h1 class="display-5 fw-bold text-primary mb-3">
            <i class="bi bi-speedometer2 me-2"></i>Welcome, {{ username }}!
          </h1>
          <p class="lead text-muted">
            You are logged in as a
            <span class="badge bg-primary">{{ role|capitalize }}</span> {% if
            class_name and class_name != "Not Enrolled" and class_name != "No
            Class Assigned" %} in
            <span class="badge bg-success">{{ class_name }}</span>
            {% endif %}
          </p>
          <div class="mt-4">
            <a href="/students" class="btn btn-primary btn-lg me-3">
              <i class="bi bi-people me-2"></i>View Students
            </a>
            <a href="/timetable" class="btn btn-outline-primary btn-lg">
              <i class="bi bi-calendar-week me-2"></i>View Timetable
            </a>
            {% if role == 'teacher' %}
            <a href="/my_class" class="btn btn-success btn-lg ms-3">
              <i class="bi bi-house-door me-2"></i>My Class
            </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="row mb-4">
    {% if role == 'teacher' and student_count > 0 %}
    <div class="col-md-3 mb-3">
      <div class="card stat-card stat-1 hover-lift">
        <div class="card-body text-center">
          <i class="bi bi-people-fill"></i>
          <h3 class="counter" data-target="{{ student_count }}">0</h3>
          <p>Students in Your Class</p>
        </div>
      </div>
    </div>
    {% endif %}

    <div class="col-md-3 mb-3">
      <div class="card stat-card stat-2 hover-lift">
        <div class="card-body text-center">
          <i class="bi bi-person-badge"></i>
          <h3 class="counter" data-target="{{ total_teachers }}">0</h3>
          <p>Total Teachers</p>
        </div>
      </div>
    </div>

    <div class="col-md-3 mb-3">
      <div class="card stat-card stat-3 hover-lift">
        <div class="card-body text-center">
          <i class="bi bi-mortarboard-fill"></i>
          <h3 class="counter" data-target="{{ total_students }}">0</h3>
          <p>Total Students</p>
        </div>
      </div>
    </div>

    <div class="col-md-3 mb-3">
      <div class="card stat-card stat-4 hover-lift">
        <div class="card-body text-center">
          <i class="bi bi-house-door-fill"></i>
          <h3 class="counter" data-target="{{ total_classes }}">0</h3>
          <p>Total Classes</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="row">
    <div class="col-md-6 mb-4">
      <div class="card hover-lift">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-lightning-fill me-2"></i>Quick Actions
          </h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-6">
              <a
                href="/students"
                class="btn btn-outline-primary w-100 d-flex flex-column align-items-center py-3"
              >
                <i class="bi bi-people-fill fs-2 mb-2"></i>
                <span>All Students</span>
              </a>
            </div>
            <div class="col-6">
              <a
                href="/teachers"
                class="btn btn-outline-success w-100 d-flex flex-column align-items-center py-3"
              >
                <i class="bi bi-person-badge fs-2 mb-2"></i>
                <span>All Teachers</span>
              </a>
            </div>
            <div class="col-6">
              <a
                href="/timetable"
                class="btn btn-outline-info w-100 d-flex flex-column align-items-center py-3"
              >
                <i class="bi bi-calendar-week fs-2 mb-2"></i>
                <span>Timetable</span>
              </a>
            </div>
            {% if role == 'teacher' %}
            <div class="col-6">
              <a
                href="/my_class"
                class="btn btn-outline-warning w-100 d-flex flex-column align-items-center py-3"
              >
                <i class="bi bi-house-door fs-2 mb-2"></i>
                <span>My Class</span>
              </a>
            </div>
            {% else %}
            <div class="col-6">
              <div
                class="btn btn-outline-secondary w-100 d-flex flex-column align-items-center py-3"
                style="cursor: default"
              >
                <i class="bi bi-person fs-2 mb-2"></i>
                <span>My Profile</span>
              </div>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Activity -->
    <div class="col-md-6 mb-4">
      <div class="card hover-lift">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-activity me-2"></i>Recent Activity
          </h5>
        </div>
        <div class="card-body">
          <div class="list-group list-group-flush">
            <div class="list-group-item border-0 px-0">
              <div class="d-flex align-items-center">
                <div class="bg-primary bg-opacity-10 rounded p-2 me-3">
                  <i class="bi bi-person-plus text-primary"></i>
                </div>
                <div class="flex-grow-1">
                  <h6 class="mb-1">New Student Added</h6>
                  <small class="text-muted">5 minutes ago</small>
                </div>
              </div>
            </div>
            <div class="list-group-item border-0 px-0">
              <div class="d-flex align-items-center">
                <div class="bg-success bg-opacity-10 rounded p-2 me-3">
                  <i class="bi bi-calendar-check text-success"></i>
                </div>
                <div class="flex-grow-1">
                  <h6 class="mb-1">Timetable Updated</h6>
                  <small class="text-muted">2 hours ago</small>
                </div>
              </div>
            </div>
            <div class="list-group-item border-0 px-0">
              <div class="d-flex align-items-center">
                <div class="bg-info bg-opacity-10 rounded p-2 me-3">
                  <i class="bi bi-chat-left-text text-info"></i>
                </div>
                <div class="flex-grow-1">
                  <h6 class="mb-1">New Announcement</h6>
                  <small class="text-muted">Yesterday</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- System Info -->
  <div class="row">
    <div class="col-12">
      <div class="card hover-lift">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-info-circle me-2"></i>System Information
          </h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-4 mb-3">
              <div class="d-flex align-items-center">
                <div class="bg-primary bg-opacity-10 rounded p-3 me-3">
                  <i class="bi bi-shield-check text-primary fs-4"></i>
                </div>
                <div>
                  <h6 class="mb-0">Secure Access</h6>
                  <small class="text-muted">Role-based authentication</small>
                </div>
              </div>
            </div>
            <div class="col-md-4 mb-3">
              <div class="d-flex align-items-center">
                <div class="bg-success bg-opacity-10 rounded p-3 me-3">
                  <i class="bi bi-database-check text-success fs-4"></i>
                </div>
                <div>
                  <h6 class="mb-0">Real-time Data</h6>
                  <small class="text-muted">Instant updates</small>
                </div>
              </div>
            </div>
            <div class="col-md-4 mb-3">
              <div class="d-flex align-items-center">
                <div class="bg-warning bg-opacity-10 rounded p-3 me-3">
                  <i class="bi bi-phone text-warning fs-4"></i>
                </div>
                <div>
                  <h6 class="mb-0">Mobile Friendly</h6>
                  <small class="text-muted">Responsive design</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block scripts %}
<script>
  // Initialize counters
  document.addEventListener("DOMContentLoaded", function () {
    const counters = document.querySelectorAll(".counter");
    counters.forEach((counter) => {
      const target = parseInt(counter.getAttribute("data-target"));
      let current = 0;
      const increment = target / 50;

      const updateCounter = () => {
        if (current < target) {
          current += increment;
          counter.textContent = Math.ceil(current);
          setTimeout(updateCounter, 20);
        } else {
          counter.textContent = target;
        }
      };

      setTimeout(updateCounter, 500);
    });
  });
</script>
{% endblock %}
